{% extends 'base.html' %}

{% block header %}
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="row mt-3 mb-3">
                    <div class="col-12">
                        <div class="alert alert-info text-center">{{ message }}</div>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <!-- Jumbotron -->
    <div class="container mt-5 mb-5">
        <div class="row justify-content-center pb-4">
            <div class="col-md-9 col-lg-8 col-xl-7">
                <div class="card shadow p-5 bg-light">
                    <h1 class="text-center mb-3">Find our best travel deals</h1>
                    
                    <!-- Search Bar -->
                    <form class="form-inline d-flex flex-nowrap" action="{{ url_for('main.search') }}">
                        <input type="text" name="search" class="form-control flex-grow-1 my-1 me-1" 
                        id="SearchForm" placeholder="Find the perfect getaway destination...">
                        <button type="submit" class="flex-shrink-1 btn btn-primary my-1">Search</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <!-- Hero -->
    <div class="container mt-5">
        <div class="row justify-content-center mt-4 mb-5">
            <div class="col-md-9 col-lg-8 col-xl-7">
                <div class="media border p-3 d-flex">
                    <img class="align-self-center me-3" style="max-width:120px"
                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Earth_Western_Hemisphere_transparent_background.png/600px-Earth_Western_Hemisphere_transparent_background.png"
                        alt="Planet Earth">
                    <div class="align-self-center media-body mb-4">
                        <h5 class="mt-4">Explore The Planet</h5>
                        <p class="d-flex">
                            Embark on your next adventure with us.
                            <br></br>
                            Discover amazing destinations and exclusive deals with Travello. Start 
                            planning your next adventure and create unforgettable memories around the world.
                        </p>
                        <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Join Now</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Destination Preview -->
    <div class="container mt-4">
        <div class="row justify-content-center">
            {% for destination in destinations %}
                <div class="col-10 col-lg-5 d-flex justify-content-center mb-5 mx-3">
                    <div class="card">
                        <img
                            src="{{ destination.image }}"
                            alt="{{ destination.name }}"
                            class="card-img-top"
                            style="height:300px; object-fit:cover;">
                        <div class="card-body">
                            <h5 class="card-title">{{ destination.city_name }}, {{ destination.country_name }}</h5>
                            <p class="card-text">{{ destination.description }}</p>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex justify-content-center">
                                <a href="{{ url_for('destination.show', id=destination.id) }}" class="btn btn-danger">See More</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}